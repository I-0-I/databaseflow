@(user: Option[models.user.User], license: Option[licensing.License], licenseContent: Option[String])(
  implicit request: Request[AnyContent], session: Session, flash: Flash, messages: Messages
)@layout.simple(user = user, title = messages("license.new.form", utils.Config.projectName)) {
  <form method="post" action="@controllers.routes.LicenseController.save()">
    <div class="row">
      <div class="col s12">
        <div class="content-panel">
          <span class="panel-title">
            @messages("license.new.form")
          </span>
          <div class="row">
            <div class="col s12">
              @license.map { l =>
                <table style="margin: 10px 0;" class="license-table">
                  <thead>
                    <tr>
                      <th>@messages("th.name")</th>
                      <th>@messages("th.email")</th>
                      <th>@messages("th.edition")</th>
                      <th>@messages("th.issued")</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>@l.name</td>
                      <td>@l.email</td>
                      <td>@l.edition.title</td>
                      <td>@{new org.joda.time.LocalDateTime(l.issued).toString("yyyy-MM-dd")}</td>
                    </tr>
                  </tbody>
                </table>
              }
              @if(license.isEmpty) {
                @defining(services.licensing.LicenseService.daysRemaining) { remaining =>
                  @if(remaining > 0) {
                    <p>You have @remaining days remaining in your trial.</p>
                  } else {
                    <p>Your trial has expired.</p>
                  }
                  <p>To obtain a license, head to <a class="theme-text" href="@utils.Config.projectUrl/versions" target="_blank">databaseflow.com</a>.</p>
                }
              }
            </div>
            <div class="input-field col s12">
              <textarea
                name="content"
                class="materialize-textarea"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"
                spellcheck="false"
                placeholder="License Content"
              >@licenseContent.getOrElse("")</textarea>
            </div>
          </div>
        </div>
        <div class="panel-action">
          <button class="right btn blue-grey waves-effect waves-light" type="submit">@messages("general.save")</button>
          <div style="clear: both;"></div>
        </div>
      </div>
    </div>
  </form>
}
