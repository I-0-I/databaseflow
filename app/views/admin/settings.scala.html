@(user: Option[models.user.User], debug: Boolean, settings: Map[models.settings.SettingKey, String])(
    implicit request: Request[AnyContent], session: Session, flash: Flash, messages: Messages
)

@import models.settings.SettingKey._

@settingPanel(key: models.settings.SettingKey, colWidth: Int = 12)(content: Html) = {
  <div class="col s12 m@colWidth">
    <div class="z-depth-1 setting-panel">
      <strong>@key.title</strong>
      <div class="setting-input">@content</div>
      <em>@key.description</em>
    </div>
  </div>
}

@roleRadio(name: String, r: models.user.Role, selected: models.user.Role) = {
  <div>
    <input type="radio" id="role-@name-@r" name="@name" value="@r" @if(selected == r) { checked="checked" }></input>
    <label for="role-@name-@r">@r</label>
  </div>
}

@layout.admin(user, "settings", messages("admin.settings.title"), debug = debug) {
  <form action="@controllers.admin.routes.SettingsController.saveSettings()" method="post">
    <div class="card-content">
      <div class="card-title"><i class="fa @models.template.Icons.settings"></i> @messages("admin.settings.title")</div>

      <div class="row">
        @settingPanel(AllowRegistration) {
          <div class="row">
            <div class="col s12">
            @defining(services.settings.SettingsService.allowRegistration) { allowRegistration =>
              <div>
                <input type="radio" id="@AllowRegistration.id-true" name="@AllowRegistration.id" value="true" @if(allowRegistration) { checked="checked" }></input>
                <label for="@AllowRegistration.id-true">Yes</label>
              </div>
              <div>
                <input type="radio" id="@AllowRegistration.id-false" name="@AllowRegistration.id" value="false" @if(!allowRegistration) { checked="checked" }></input>
                <label for="@AllowRegistration.id-false">No</label>
              </div>
            }
            </div>
          </div>
        }

        @settingPanel(DefaultNewUserRole, 6) {
          <div class="row">
            <div class="col s12">
            @defining(models.user.Role.withName(services.settings.SettingsService(DefaultNewUserRole))) { newUserRole =>
              @roleRadio(DefaultNewUserRole.id, models.user.Role.Visitor, newUserRole)
              @roleRadio(DefaultNewUserRole.id, models.user.Role.User, newUserRole)
              @roleRadio(DefaultNewUserRole.id, models.user.Role.Admin, newUserRole)
            }
            </div>
          </div>
        }

        @settingPanel(AddConnectionRole, 6) {
          <div class="row">
            <div class="col s12">
            @defining(models.user.Role.withName(services.settings.SettingsService(AddConnectionRole))) { addConnectionRole =>
              @roleRadio(AddConnectionRole.id, models.user.Role.Visitor, addConnectionRole)
              @roleRadio(AddConnectionRole.id, models.user.Role.User, addConnectionRole)
              @roleRadio(AddConnectionRole.id, models.user.Role.Admin, addConnectionRole)
            }
            </div>
          </div>
        }
      </div>
    </div>
    <div class="card-action">
      <button class="right btn theme waves-effect waves-light" type="submit">Save</button>
      <a class="right theme-text btn-flat" href="@controllers.routes.HomeController.home()">Cancel</a>
      <div style="clear: both;"></div>
    </div>
  </form>
}
