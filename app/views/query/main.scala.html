@(user: Option[models.user.User], debug: Boolean, connectionId: java.util.UUID, dbName: String, initialQuery: java.util.UUID)(
    implicit request: Request[AnyContent], session: Session, flash: Flash, messages: Messages
)@views.html.layout.materialize(
  user = user,
  title = dbName + " - " + utils.Config.projectName,
  scripts = Seq(routes.Assets.versioned("javascripts/timeago.js").url),
  debug = debug
) {
  @views.html.layout.themeStyles(user.map(_.preferences.theme).getOrElse("blue-grey"))
  @views.html.query.navbar(user, dbName)

  <main class="indent">
    <div class="tab-container z-depth-1">
      <ul id="query-tabs" class="tabs">
        <li id="tab-loading" class="tab col s3">
          <a href="#loading-panel"><i class="fa @models.template.Icons.database"></i> Loading @dbName</a>
        </li>
      </ul>
    </div>

    <div id="workspace">
      <div id="loading-panel">
        <div class="row">
          <div class="col s12">
            <div class="card">
              <div class="card-content">
                <span class="card-title">
                  Loading @dbName
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    @views.html.query.helpPanel()
    @views.html.query.confirmModal(user)
    @views.html.query.saveModal(user)
    @views.html.query.exportModal(user, connectionId)
  </main>

  @if(debug) {
    <script src="@routes.Assets.versioned("lib/ace/ace.js")" type="text/javascript" charset="utf-8"></script>
    <script src="@routes.Assets.versioned("lib/ace/ext-language_tools.js")" type="text/javascript" charset="utf-8"></script>
    <script src="@routes.Assets.versioned("lib/ace/mode-sql.js")" type="text/javascript" charset="utf-8"></script>
    <script src="@routes.Assets.versioned("client-fastopt.js")" type="text/javascript"></script>
  } else {
    <script src="@routes.Assets.versioned("lib/ace/min/ace-concat.min.js")" type="text/javascript" charset="utf-8"></script>
    <script src="@routes.Assets.versioned("client-opt.js")" type="text/javascript"></script>
  }

  <script>
    window.dbf = new DatabaseFlow();
  </script>
}
